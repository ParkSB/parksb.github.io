<!DOCTYPE html><html lang="ko"><head><meta charset="UTF-8"><title> μΈν„°λ„·μ΄ λ™μ‘ν•λ” μ•„μ£Ό κµ¬μ²΄μ μΈ μ›λ¦¬ </title><meta name="viewport" content="width=device-width, initial-scale=1"><meta http-equiv="X-UA-Compatible" content="ie=edge"><meta name="theme-color" content="#F5F5F5"><link rel="canonical" href="https://parksb.github.io/article/36.html"><meta property="og:title" content="μΈν„°λ„·μ΄ λ™μ‘ν•λ” μ•„μ£Ό κµ¬μ²΄μ μΈ μ›λ¦¬: ν•™κµμ—μ„ κµ¬κΈ€μ— μ ‘μ†ν•λ” κ³Όμ • "><meta property="og:image" content="https://og-image-parksb.vercel.app/**%EC%9D%B8%ED%84%B0%EB%84%B7%EC%9D%B4%20%EB%8F%99%EC%9E%91%ED%95%98%EB%8A%94%20%EC%95%84%EC%A3%BC%20%EA%B5%AC%EC%B2%B4%EC%A0%81%EC%9D%B8%20%EC%9B%90%EB%A6%AC**.png?subtitle=%ED%95%99%EA%B5%90%EC%97%90%EC%84%9C%20%EA%B5%AC%EA%B8%80%EC%97%90%20%EC%A0%91%EC%86%8D%ED%95%98%EB%8A%94%20%EA%B3%BC%EC%A0%95&description=%E2%80%95%20Simon%20Park%20%E2%80%95%202020.01.27%20%E2%80%95%20parksb.github.io"><meta property="og:description" content="ν•™κµμ—μ„ λ…ΈνΈλ¶μΌλ΅ κµ¬κΈ€(www.google.com)μ— μ ‘μ†ν•λ” κ³Όμ •μ„ μ‚΄ν΄λ³Έλ‹¤. μ΄ κΈ€μ— λ“±μ¥ν•λ” KTμ™€ Google Fiber, κµ¬κΈ€μ λ„¤νΈμ›ν¬ κµ¬μ΅°, λ…Έλ“μ IP μ£Όμ†μ™€ MAC μ£Όμ†λ” λ¨λ‘ κ°„μ†ν™” λλ” κ°€μ •ν• κ²ƒμ΄λ‹¤. λν• ν΄λΌμ΄μ–ΈνΈμ™€ μ„λ²„κ°€ ν¨ν‚·μ„ μ£Όκ³ λ°›λ” μ „μ²΄ κ³Όμ •μ„ ν›‘κΈ° μ„ν•΄ ν”„λ΅μ‹μ™€ μΊμ‹λ” μƒλµν–λ‹¤.ν•™κµ λ„¤νΈ..."><meta name="twitter:title" content="μΈν„°λ„·μ΄ λ™μ‘ν•λ” μ•„μ£Ό κµ¬μ²΄μ μΈ μ›λ¦¬: ν•™κµμ—μ„ κµ¬κΈ€μ— μ ‘μ†ν•λ” κ³Όμ • "><meta name="twitter:image" content="https://og-image-parksb.vercel.app/**%EC%9D%B8%ED%84%B0%EB%84%B7%EC%9D%B4%20%EB%8F%99%EC%9E%91%ED%95%98%EB%8A%94%20%EC%95%84%EC%A3%BC%20%EA%B5%AC%EC%B2%B4%EC%A0%81%EC%9D%B8%20%EC%9B%90%EB%A6%AC**.png?subtitle=%ED%95%99%EA%B5%90%EC%97%90%EC%84%9C%20%EA%B5%AC%EA%B8%80%EC%97%90%20%EC%A0%91%EC%86%8D%ED%95%98%EB%8A%94%20%EA%B3%BC%EC%A0%95&description=%E2%80%95%20Simon%20Park%20%E2%80%95%202020.01.27%20%E2%80%95%20parksb.github.io"><meta name="twitter:description" content="ν•™κµμ—μ„ λ…ΈνΈλ¶μΌλ΅ κµ¬κΈ€(www.google.com)μ— μ ‘μ†ν•λ” κ³Όμ •μ„ μ‚΄ν΄λ³Έλ‹¤. μ΄ κΈ€μ— λ“±μ¥ν•λ” KTμ™€ Google Fiber, κµ¬κΈ€μ λ„¤νΈμ›ν¬ κµ¬μ΅°, λ…Έλ“μ IP μ£Όμ†μ™€ MAC μ£Όμ†λ” λ¨λ‘ κ°„μ†ν™” λλ” κ°€μ •ν• κ²ƒμ΄λ‹¤. λν• ν΄λΌμ΄μ–ΈνΈμ™€ μ„λ²„κ°€ ν¨ν‚·μ„ μ£Όκ³ λ°›λ” μ „μ²΄ κ³Όμ •μ„ ν›‘κΈ° μ„ν•΄ ν”„λ΅μ‹μ™€ μΊμ‹λ” μƒλµν–λ‹¤.ν•™κµ λ„¤νΈ..."><meta name="twitter:card" content="summary_large_image"><link rel="preload" href="/init.9f9937d1.css" as="style"><link rel="preload" href="/article.32d70d6a.css" as="style"><link rel="shortcut icon" href="/favicon.6b194a55.ico" type="image/x-icon"><link rel="stylesheet" href="/init.9f9937d1.css"><link rel="stylesheet" href="/article.32d70d6a.css"></head><body> <header id="top-container" role="navigation"> </header> <main id="main-container"> <article id="article-container"> <h1 id="article-title"> μΈν„°λ„·μ΄ λ™μ‘ν•λ” μ•„μ£Ό κµ¬μ²΄μ μΈ μ›λ¦¬ </h1> <h2 id="article-subtitle"> ν•™κµμ—μ„ κµ¬κΈ€μ— μ ‘μ†ν•λ” κ³Όμ • </h2> <time id="article-date"> 2020.01.27 </time> <small id="article-history"> <a href="https://github.com/parksb/parksb.github.io/commits/development/_articles/20200131_what-happens-when-you-open-google.md"> (history) </a> </small> <section id="article-content-container"> <details><summary>Table of Contents</summary>
<p><div class="table-of-contents"><ul><li><a href="#getting-started%3A-wlan%2C-dhcp%2C-udp-and-ip">Getting Started: WLAN, DHCP, UDP and IP</a></li><li><a href="#still-getting-started%3A-ethernet%2C-dns-and-arp">Still Getting Started: Ethernet, DNS and ARP</a></li><li><a href="#still-getting-stated%3A-intra-domain-routing-to-the-dns-server">Still Getting Stated: Intra-Domain Routing to the DNS Server</a></li><li><a href="#web-client-server-interaction%3A-tcp-and-http">Web Client-Server Interaction: TCP and HTTP</a></li><li><a href="#references">References</a></li></ul></div></p>
</details>
<p>ν•™κµμ—μ„ λ…ΈνΈλ¶μΌλ΅ κµ¬κΈ€(<code>www.google.com</code>)μ— μ ‘μ†ν•λ” κ³Όμ •μ„ μ‚΄ν΄λ³Έλ‹¤. μ΄ κΈ€μ— λ“±μ¥ν•λ” KTμ™€ Google Fiber, κµ¬κΈ€μ λ„¤νΈμ›ν¬ κµ¬μ΅°, λ…Έλ“μ IP μ£Όμ†μ™€ MAC μ£Όμ†λ” λ¨λ‘ κ°„μ†ν™” λλ” κ°€μ •ν• κ²ƒμ΄λ‹¤. λν• ν΄λΌμ΄μ–ΈνΈμ™€ μ„λ²„κ°€ ν¨ν‚·μ„ μ£Όκ³ λ°›λ” μ „μ²΄ κ³Όμ •μ„ ν›‘κΈ° μ„ν•΄ ν”„λ΅μ‹μ™€ μΊμ‹λ” μƒλµν–λ‹¤.</p>
<p>ν•™κµ λ„¤νΈμ›ν¬μ—λ” μ—¬λ¬ AP(Access Point)κ°€ μκ³ , APλ“¤μ€ μ¤μ„μΉμ— μ—°κ²°λμ–΄ μλ‹¤. μ¤μ„μΉλ“¤μ€ κ²μ΄νΈμ›¨μ΄ λΌμ°ν„°μ™€ μ—°κ²°λμ–΄ μμΌλ©°, λΌμ°ν„°λ” SKλΈλ΅λ“λ°΄λ“λ‚ KTμ™€ κ°™μ€ ISP(Internet Service Provider)μ λ„¤νΈμ›ν¬μ— μ—°κ²°λμ–΄ μλ‹¤.</p>
<pre class="hljs"><code>School network 68.80.2.0/24

        +----+   +--------+    /------\    +--------+
Node ---| AP |---| Switch |---| Router |---| Switch |--- ... 
        +----+   +--------+    \------/    +--------+
          |           |            |         
         ...         ...           |         
                                   |
###################################|#################
KT network 68.80.0.0/13            |
                                   |
                               /------\
                       ... ---| Router |
                               \------/
                                   |
                                  ...
</code></pre>
<h2 id="getting-started%3A-wlan%2C-dhcp%2C-udp-and-ip">Getting Started: WLAN, DHCP, UDP and IP</h2>
<p>λ¨Όμ € λ…ΈνΈλ¶μ„ μΌκ³  AP(Access Point)λ¥Ό κ²€μƒ‰ν•λ‹¤. κ°€κΉμ΄ APλ“¤μ΄ μμ‹ μ λ²”μ„μ— μλ” λ¨λ“  λ…Έλ“μ—κ² λΉ„μ»¨(Beacon) ν”„λ μ„μ„ λΈλ΅λ“μΊμ¤ν…ν•λ©° μμ‹ μ μ΅΄μ¬λ¥Ό μ•λ¦¬κ³  μκΈ° λ•λ¬Έμ— ν΄λΌμ΄μ–ΈνΈλ” AP λ¦¬μ¤νΈλ¥Ό ν™•μΈν•κ³  μ—°κ²°ν•  APλ¥Ό μ„ νƒν•  μ μλ‹¤. μ΄λ ‡κ² APκ°€ μ‹ νΈλ¥Ό λ³΄λ‚΄λ” λ°©μ‹μ„ ν¨μ‹λΈ μ¤μΊλ‹(Passive scanning)μ΄λΌκ³  ν•λ©°, λ°λ€λ΅ λ…Έλ“κ°€ APλ¥Ό νƒμƒ‰ν•λ” λ°©μ‹μ€ μ•΅ν‹°λΈ μ¤μΊλ‹(Active scanning)μ΄λΌκ³  ν•λ‹¤.</p>
<pre class="hljs"><code>+-----------------+        +----------------+   +----+
| Client (Laptop) |&lt;---+---| SSID: iptime01 |---| AP |
+-----------------+    |   | Security: WPA2 |   +----+
                       |   +----------------+
              Node &lt;---+
                       |
              Node &lt;---+
</code></pre>
<p>ν΄λΌμ΄μ–ΈνΈκ°€ <code>iptime01</code>μ„ μ„ νƒν•λ©΄ APλ΅ μ ‘μ† μ”μ²­ ν”„λ μ„μ„ μ „μ†΅ν•λ‹¤. μ”μ²­ ν”„λ μ„μ„ λ°›μ€ APλ” μ‘λ‹µ ν”„λ μ„μ„ ν΄λΌμ΄μ–ΈνΈμ—κ² λ³΄λ‚΄ μ—°κ²°μ„ λ§μΉλ‹¤. ν”ν μ‚¬μ©ν•λ” Wi-Fi ν†µμ‹ μ΄ μ΄λ¬ν• <a href="http://www.ieee802.org/11/">IEEE 802.11</a> ν‘μ¤€μ„ λ°”νƒ•μΌλ΅ ν•λ‹¤.</p>
<p>μ²μμΌλ΅ ν•™κµ λ„¤νΈμ›ν¬μ— μ—°κ²°λ κ²ƒμ΄κΈ° λ•λ¬Έμ— μ΄ ν΄λΌμ΄μ–ΈνΈμ—κ²λ” μ•„μ§ IP μ£Όμ†κ°€ μ—†λ‹¤. μ΄μ  ν΄λΌμ΄μ–ΈνΈμ— IP μ£Όμ†λ¥Ό ν• λ‹Ήν•κΈ° μ„ν•΄ DHCP(Dynamic Host Configuration Protocol)κ°€ λ™μ‘ν•λ‹¤. IP ν• λ‹Ήμ„ μ„λΉ„μ¤ν•λ” DHCP μ„λ²„λ” APλ‚ λΌμ°ν„°μ—μ„ λ™μ‘ν•  μ μλ‹¤.</p>
<p>ν΄λΌμ΄μ–ΈνΈμ μ΄μμ²΄μ κ°€ ν΄λΌμ΄μ–ΈνΈμ 68λ² ν¬νΈμ—μ„ μ¶λ°ν•΄ μμ‹ μ§€μ 67λ² ν¬νΈλ΅ λ„μ°©ν•λ” DHCPD DISCOVER λ©”μ‹μ§€λ¥Ό λ§λ“ λ‹¤. DHCP DISCOVER λ©”μ‹μ§€λ” UDPλ΅ μ „μ†΅λ  κ²ƒμ΄λ‹¤. μ•„μ§ ν΄λΌμ΄μ–ΈνΈλ” IP μ£Όμ†λ¥Ό ν• λ‹Ήλ°›μ§€ λ»ν• μƒνƒμ΄λ©°, ν΄λΌμ΄μ–ΈνΈμ IP μ£Όμ†κ°€ μ—†κΈ° λ•λ¬Έμ— DHCP λ©”μ‹μ§€μ <code>src</code>, <code>yiaddr</code> ν•„λ“λ” <code>0.0.0.0</code>μ΄λ‹¤. λν• APμ— μ—°κ²°λ λ¨λ“  λ…Έλ“μ— λ©”μ‹μ§€λ¥Ό λΈλ΅λ“μΊμ¤νΈν•  κ²ƒμ΄λ―€λ΅ <code>dest</code> ν•„λ“λ” <code>255.255.255.255</code>μ΄λ‹¤.</p>
<p>DHCP DISCOVER λ©”μ‹μ§€μ ν”„λ μ„μ€ μμ‹ μ§€ MAC μ£Όμ†(<code>FF:FF:FF:FF:FF:FF</code>)λ¥Ό κ°€μ§€κ³  μμΌλ©°, APμ— μ—°κ²°λ λ¨λ“  μ¥μΉμ— λΈλ΅λ“μΊμ¤νΈλλ‹¤. μ΄λ• ν”„λ μ„μ λ°μ‹ μ§€ MAC μ£Όμ†λ” ν΄λΌμ΄μ–ΈνΈμ MAC μ£Όμ†(<code>00:16:D3:23:68:8A</code>)λ‹¤.</p>
<pre class="hljs"><code>+-------------------+   +---------------------------+    +----+
| Client (Laptop)   |---| src: 0.0.0.0, 68          |---&gt;| AP | 68.85.2.9
| 00:16:D3:23:68:8A |   | dest: 255.255.255.255, 67 |    +----+ 00:1F:57:21:A8:3C 
+-------------------+   | DHCPDISCOVER              |      | 
                        | yiaddr: 0.0.0.0           |      +---&gt; Node
                        | transaction ID: 654       |      |
                        +---------------------------+      +---&gt; Node
</code></pre>
<p>APκ°€ DHCP λ©”μ‹μ§€λ¥Ό λ°›μΌλ©΄ ν΄λΌμ΄μ–ΈνΈμ MAC μ£Όμ†(<code>00:16:D3:23:68:8A</code>)μ™€ IP λ°μ΄ν„°κ·Έλ¨μ„ ν”„λ μ„μ—μ„ μ¶”μ¶ν•λ‹¤. λ°μ΄ν„°κ·Έλ¨μ μμ‹ μ§€ IP μ£Όμ†λ” μƒμ„ λ μ΄μ–΄μ— μν•΄ μ²λ¦¬λλ‹¤.</p>
<p>APμ—μ„ λ™μ‘ν•λ” DHCP μ„λ²„λ” CIDR(Classless Inter-Domain Routing) λΈ”λ΅μ IP μ£Όμ†λ¥Ό ν• λ‹Ήν•  μ μλ‹¤. κµλ‚΄ λ„¤νΈμ›ν¬μ—μ„ μ‚¬μ© μ¤‘μΈ λ¨λ“  IP μ£Όμ†λ” KTμ μ£Όμ† λΈ”λ΅μ— μ†ν• κ²ƒμ΄λ‹¤. DHCP μ„λ²„λ” ν΄λΌμ΄μ–ΈνΈμ— ν• λ‹Ήν•κΈ° μ„ν• IP μ£Όμ†(<code>68.85.2.101</code>)λ¥Ό ν¬ν•¨ν•΄ DHCP OFFER λ©”μ‹μ§€λ¥Ό λ§λ“ λ‹¤. μ΄λ• DHCP OFFER λ©”μ‹μ§€λ¥Ό λ‹΄μ•„ ν΄λΌμ΄μ–ΈνΈμ—κ² UDPλ΅ μ „μ†΅λλ” ν”„λ μ„μ€ APμ λ°μ‹ μ§€ MAC μ£Όμ†(<code>00:1F:57:21:A8:3C</code>)μ™€ μμ‹ μ§€ MAC μ£Όμ†(<code>00:16:D3:23:68:8A</code>)λ¥Ό κ°€μ§€κ³  μλ‹¤.</p>
<pre class="hljs"><code>+-------------------+    +---------------------------+   +----+
| Client (Laptop)   |&lt;---| src: 68.85.2.9, 67        |---| AP | 68.85.2.9
| 00:16:D3:23:68:8A |    | dest: 255.255.255.255, 68 |   +----+ 00:1F:57:21:A8:3C 
+-------------------+    | DHCPOFFER                 |
                         | yiaddr: 68.85.2.101       |
                         | transaction ID: 654       |
                         | DHCP server ID: 68.85.2.9 |
                         | Lifetime: 3600 secs       |
                         +---------------------------+
</code></pre>
<p>DHCP OFFER μ‘λ‹µμ„ λ°›μ€ ν΄λΌμ΄μ–ΈνΈλ” DHCP OFFERμ κ°’μ„ λ°”νƒ•μΌλ΅ μμ‹ μ μ„¤μ • κ°’μ„ λ‹΄μ•„ DHCP REQUEST λ©”μ‹μ§€λ¥Ό λΈλ΅λ“μΊμ¤ν…ν•λ‹¤. λ§μ•½ μ—¬λ¬ DHCP OFFER λ©”μ‹μ§€λ¥Ό λ°›μ•λ‹¤λ©΄ κ·Έ μ¤‘ ν•λ‚λ¥Ό μ„ νƒν•λ‹¤.</p>
<pre class="hljs"><code>+-------------------+   +---------------------------+    +----+
| Client (Laptop)   |---| src: 0.0.0.0, 68          |---&gt;| AP | 68.85.2.9
| 00:16:D3:23:68:8A |   | dest: 255.255.255.255, 67 |    +----+ 00:1F:57:21:A8:3C 
+-------------------+   | DHCPREQUEST               |      |
                        | yiaddr: 68.85.2.101       |      +---&gt; Node
                        | transaction ID: 655       |      |
                        | DHCP server ID: 68.85.2.2 |      +---&gt; Node
                        | Lifetime: 3600 secs       |
                        +---------------------------+
</code></pre>
<p>DHCP REQUESTλ¥Ό λ°›μ€ λΌμ°ν„°λ” DHCP ACK λ©”μ‹μ§€λ¥Ό λΈλ΅λ“μΊμ¤ν…ν•΄ μ”μ²­λ°›μ€ μ„¤μ • κ°’μ„ μΉμΈν•λ‹¤.</p>
<pre class="hljs"><code>+-------------------+        +---------------------------+   +----+
| Client (Laptop)   |&lt;---+---| src: 68.85.2.9, 67        |---| AP | 68.85.2.9
| 68.85.2.101       |    |   | dest: 255.255.255.255, 68 |   +----+ 00:1F:57:21:A8:3C 
| 00:16:D3:23:68:8A |    |   | DHCPACK                   |
+-------------------+    |   | yiaddr: 68.85.2.101       |
                         |   | transaction ID: 655       |
                Node &lt;---+   | DHCP server ID: 68.85.2.9 |
                         |   | Lifetime: 3600 secs       |
                Node &lt;---+   +---------------------------+
</code></pre>
<p>ν΄λΌμ΄μ–ΈνΈλ” DHCP ACK λ©”μ‹μ§€λ¥Ό μ¶”μ¶ν•κ³  μμ‹ μ IP μ£Όμ†μ™€ DNS μ„λ²„μ IP μ£Όμ†λ¥Ό κΈ°λ΅ν•λ‹¤. μ΄λ ‡κ² ν• λ‹Ήλ IP μ£Όμ†λ” κΈ°λ³Έμ μΌλ΅ μ„λ€ν• κ²ƒμ΄κΈ° λ•λ¬Έμ— μΌμ • κΈ°κ°„ μ‚¬μ©ν•μ§€ μ•μΌλ©΄ λ‹¤μ‹ λ°λ‚©λμ–΄ μƒλ΅μ΄ IPλ¥Ό ν• λ‹Ήλ°›μ•„μ•Ό ν•λ‹¤.</p>
<h2 id="still-getting-started%3A-ethernet%2C-dns-and-arp">Still Getting Started: Ethernet, DNS and ARP</h2>
<p>ν΄λΌμ΄μ–ΈνΈκ°€ λΈλΌμ°μ €μ—μ„ <code>www.google.com</code>κ³Ό κ°™μ€ URLμ„ μ…λ ¥ν•λ©΄ μ—¬λ¬ κ³Όμ •μ„ κ±°μ³ κµ¬κΈ€μ ν™νμ΄μ§€κ°€ ν΄λΌμ΄μ–ΈνΈμ λΈλΌμ°μ €μ— λ³΄μ—¬μ§ κ²ƒμ΄λ‹¤. κ·Έμ „μ— ν΄λΌμ΄μ–ΈνΈλ” <code>www.google.com</code>μ IP μ£Όμ†λ¥Ό μ•μ•„λ‚΄μ•Ό ν•λ‹¤. μ΄λ• λ„λ©”μΈ λ„¤μ„μ„ IP μ£Όμ†λ΅ λ³€ν™ν•κΈ° μ„ν•΄ DNS ν”„λ΅ν† μ½μ΄ μ‚¬μ©λλ‹¤.</p>
<p>DNS μΏΌλ¦¬λ¥Ό μ„ν•΄ ν΄λΌμ΄μ–ΈνΈλ” DNS μΏΌλ¦¬ λ©”μ‹μ§€λ¥Ό λ‹΄μ€ ν”„λ μ„μ„ κµλ‚΄ λ„¤νΈμ›ν¬μ— μλ” λ΅μ»¬ DNS μ„λ²„μ— λ³΄λ‚Ό κ²ƒμ΄λ‹¤. DNS μ„λ²„λ” λΌμ°ν„°μ—μ„ λ™μ‘ν•  μλ„ μλ”λ°, μ΄ κ²½μ°μ—λ” λ³„λ„μ λ΅μ»¬ DNS μ„λ²„κ°€ μ΄μλκ³  μλ‹¤.</p>
<p>λ΅μ»¬ DNS μ„λ²„κ°€ μ—†λ” κ²½μ°μ—λ” ISPμ DNS μ„λ²„λ΅ μ „μ†΅ν•λ‹¤. κ·Έλ° κ²½μ° λ§μ•½ ISPκ°€ νΉμ • μ‚¬μ΄νΈμ— λ€ν• μ ‘μ†μ„ μ°¨λ‹¨ν•κ³ μ ν•λ‹¤λ©΄ μ”μ²­ λ°›μ€ λ„λ©”μΈ λ„¤μ„μ IP μ£Όμ†κ°€ μ•„λ‹ <code>warning.or.kr</code>μ IP μ£Όμ†λ¥Ό μ‘λ‹µν•΄μ¤„ μ μλ‹¤.</p>
<p>ν„μ¬ ν΄λΌμ΄μ–ΈνΈλ” λ΅μ»¬ DNS μ„λ²„μ MAC μ£Όμ†λ¥Ό λ¨λ¥Έλ‹¤. μ΄λ¥Ό μ•μ•„λ‚΄κΈ° μ„ν•΄ ARP(Address Resolution Protocol)λ¥Ό μ‚¬μ©ν•λ‹¤.</p>
<p>ν΄λΌμ΄μ–ΈνΈκ°€ λ΅μ»¬ DNS μ„λ²„μ IP μ£Όμ†μ™€ ν•¨κ» ARP μΏΌλ¦¬ λ©”μ‹μ§€λ¥Ό λ§λ“ λ‹¤. ARP λ©”μ‹μ§€λ” APλ΅ μ „μ†΅λλ©°, APμ— μ΄λ”λ„·(Ethernet)μΌλ΅ μ—°κ²°λ μ¤μ„μΉλ΅λ„ λΈλ΅λ“μΊμ¤ν…λλ‹¤. μ¤μ„μΉ μ—­μ‹ λ΅μ»¬ DNS μ„λ²„μ MAC μ£Όμ†λ¥Ό λ¨λ¥΄κΈ° λ•λ¬Έμ— μμ‹ μ—κ² μ—°κ²°λ λ¨λ“  μ¥λΉ„μ— ν”„λ μ„μ„ μ „μ†΅ν•λ‹¤. μ΄λ”λ„·μ€ μ μ„  LAN(Local Area Network)μ„ κµ¬μ„±ν•κΈ° μ„ν• ν†µμ‹  ν‘μ¤€μ΄λ©°, <a href="http://www.ieee802.org/3/">IEEE 802.3</a>μΌλ΅ μ •μλμ–΄ μλ‹¤.</p>
<pre class="hljs"><code>+-------------------+   +------------------------------+    +----+    +--------+     /------\
| Client (Laptop)   |---| Sender HA: 00-16-D3-23-68-8A |---&gt;| AP |---&gt;| Switch |---&gt;| Router | 68.85.2.1
| 68.85.2.101       |   | Sender IP: 68.85.2.101       |    +----+    +--------+     \------/  00:22:6B:45:1F:1B
| 00:16:D3:23:68:8A |   | Target HA: 00-00-00-00-00-00 |                |    |
+-------------------+   | Target IP: 68.85.2.2         |                |    |     +------------------+ 
                        +------------------------------+                |    +----&gt;| Local DNS Server | 68.85.2.2 
                                                                        |          +------------------+
                                                                        |
                                                                        +---------&gt; Node
</code></pre>
<p>λ΅μ»¬ DNS μ„λ²„μ MAC μ£Όμ†λ¥Ό λ¨λ¥΄κΈ° λ•λ¬Έμ— <code>Target HA</code> ν•„λ“μ κ°’μ€ <code>00-00-00-00-00-00</code>μΌλ΅ μ„¤μ •λλ‹¤.</p>
<p>λ΅μ»¬ DNS μ„λ²„κ°€ ARP μΏΌλ¦¬ λ©”μ‹μ§€λ¥Ό ν¬ν•¨ν• ν”„λ μ„μ„ λ°›μΌλ©΄ μμ‹ μ MAC μ£Όμ†λ¥Ό λ‹΄μ•„ ARP μ‘λ‹µμ„ μ¤€λΉ„ν•λ‹¤. ARP μ‘λ‹µ λ©”μ‹μ§€λ” μμ‹ μ§€ μ£Όμ†μ™€ ν•¨κ» μ΄λ”λ„· ν”„λ μ„μ— λ‹΄κΈ°λ©°, ν”„λ μ„μ€ μ¤μ„μΉλ΅ μ „μ†΅λλ‹¤. μ΄μ–΄μ„ μ¤μ„μΉλ” ν΄λΌμ΄μ–ΈνΈμ— ν”„λ μ„μ„ μ „μ†΅ν•λ‹¤.</p>
<pre class="hljs"><code>+-------------------+    +----+    +--------+    +------------------------------+   +------------------+
| Client (Laptop)   |&lt;---| AP |&lt;---| Switch |&lt;---| Sender HA: 00-16-D3-23-68-8A |---| Local DNS Server | 68.85.2.2
| 68.85.2.101       |    +----+    +--------+    | Sender IP: 68.85.2.101       |   +------------------+ 00:07:89:1C:43:2F 
| 00:16:D3:23:68:8A |                            | Target HA: 00:07:89:1C:43:2F |
+-------------------+                            | Target IP: 68.85.2.2         |
                                                 +------------------------------+
</code></pre>
<p>ν΄λΌμ΄μ–ΈνΈκ°€ ARP μ‘λ‹µ λ©”μ‹μ§€λ¥Ό λ‹΄μ€ ν”„λ μ„μ„ λ°›κ³ , ARP μ‘λ‹µ λ©”μ‹μ§€μ—μ„ λ΅μ»¬ DNS μ„λ²„μ MAC μ£Όμ†(<code>00:07:89:1C:43:2F</code>)λ¥Ό μ¶”μ¶ν•λ‹¤. μ΄μ  ν΄λΌμ΄μ–ΈνΈκ°€ λ΅μ»¬ DNS μ„λ²„μ MAC μ£Όμ†λ¥Ό μ•κ² λμ—μΌλ―€λ΅ DNS μΏΌλ¦¬ λ©”μ‹μ§€λ¥Ό λ³΄λ‚Ό μ μλ‹¤.</p>
<p>ν΄λΌμ΄μ–ΈνΈμ μ΄μμ²΄μ λ” DNS μΏΌλ¦¬ λ©”μ‹μ§€λ¥Ό λ§λ“¤κ³  λ©”μ‹μ§€μ μ§μ μ„Ήμ…μ— <code>www.google.com</code> λ¬Έμμ—΄μ„ λ„£λ”λ‹¤. DNS λ©”μ‹μ§€μ— μ΄μ–΄ λ΅μ»¬ DNS μ„λ²„μ 53ν¬νΈλ΅ ν–¥ν•λ” UDP μ„Έκ·Έλ¨ΌνΈμ™€ IP λ°μ΄ν„°κ·Έλ¨μ΄ λ¶™μ—¬μ§„λ‹¤. μ΄ ν”„λ μ„μ IP λ°μ΄ν„°κ·Έλ¨μ€ μμ‹ μ§€ IP μ£Όμ†λ¥Ό κ°€μ§€κ³  μλ‹¤. ν΄λΌμ΄μ–ΈνΈλ” ν”„λ μ„μ„ APλ΅ λ³΄λ‚΄κ³  APλ” μ¤μ„μΉλ΅ ν”„λ μ„μ„ μ „λ‹¬ν•λ‹¤. μ¤μ„μΉλ” μμ‹ μ—κ² μ—°κ²°λ λ΅μ»¬ DNS μ„λ²„μ—κ² ν”„λ μ„μ„ μ „μ†΅ν•λ‹¤.</p>
<pre class="hljs"><code>+-------------------+   +---------------------------------------+    +----+    +--------+    +------------------+
| Client (Laptop)   |---| Identification, Flags (OP, Query type,|---&gt;| AP |---&gt;| Switch |---&gt;| Local DNS Server | 68.85.2.2
| 68.85.2.101       |   | AA, TC, RD, RA, Response Type)        |    +----+    +--------+    +------------------+ 00:07:89:1C:43:2F 
| 00:16:D3:23:68:8A |   | Questions (Query name, type, class )  |
+-------------------+   | Answers, Authority, Additional Info   |
                        +---------------------------------------+
</code></pre>
<h2 id="still-getting-stated%3A-intra-domain-routing-to-the-dns-server">Still Getting Stated: Intra-Domain Routing to the DNS Server</h2>
<p>λ΅μ»¬ DNS μ„λ²„λ” DNS μΏΌλ¦¬ λ©”μ‹μ§€λ¥Ό λ³΄κ³  <code>www.google.com</code>μ IP μ£Όμ†λ¥Ό μ°Ύλ”λ‹¤. λ΅μ»¬ DNS μ„λ²„κ°€ ν•΄λ‹Ή IP μ£Όμ†λ¥Ό μ•κ³  μμΌλ©΄ ν΄λΌμ΄μ–ΈνΈμ—κ² λ°”λ΅ μ‘λ‹µμ„ μ¤„ μ μλ‹¤. ν•μ§€λ§ μ§€κΈ λ΅μ»¬ DNS μ„λ²„λ” <code>www.google.com</code>μ IP μ£Όμ†λ¥Ό λ¨λ¥΄κΈ° λ•λ¬Έμ— λ£¨νΈ DNS μ„λ²„μ— DNS μΏΌλ¦¬λ¥Ό μ „μ†΅ν•  κ²ƒμ΄λ‹¤. λ£¨νΈ DNS μ„λ²„λ” μ „μ„Έκ³„μ— 13λ€ λΏμ΄λ©°, ν•κµ­μ„ λΉ„λ΅―ν• λ‹¤μ–‘ν• λ‚λΌμ— λ―Έλ¬ μ„λ²„κ°€ μ΄μλκ³  μλ‹¤.</p>
<p>λ£¨νΈ DNS μ„λ²„λ” μ™Έλ¶€ λ„¤νΈμ›ν¬μ— μκΈ° λ•λ¬Έμ— κ²μ΄νΈμ›¨μ΄ λΌμ°ν„°λ¥Ό ν†µκ³Όν•΄μ•Όν•λ‹¤. μ΄λ• ν΄λΌμ΄μ–ΈνΈλ” λΌμ°ν„°μ MAC μ£Όμ†λ¥Ό λ¨λ¥΄κΈ° λ•λ¬Έμ— ARPλ¥Ό μ‚¬μ©ν•΄ μ•μ„ λ΅μ»¬ DNS μ„λ²„μ MAC μ£Όμ†λ¥Ό μ•μ•„λ‚Ό λ•μ™€ κ°™μ€ κ³Όμ •μ„ κ±°μΉλ‹¤.</p>
<pre class="hljs"><code>+-------------------+   +------------------------------+    +--------+     /------\
| Local DNS Server  |---| Sender HA: 00:07:89:1C:43:2F |---&gt;| Switch |---&gt;| Router | 68.85.2.1
| 68.85.2.2         |   | Sender IP: 68.85.2.2         |    +--------+     \------/  00:22:6B:45:1F:1B 
| 00:07:89:1C:43:2F |   | Target HA: 00-00-00-00-00-00 |      |    |
+-------------------+   | Target IP: 68.85.2.1         |      |    |
                        +------------------------------+      |    +-----&gt; Node
                                                              |
                                                              |
                                                              +----------&gt; Node
</code></pre>
<p>λΌμ°ν„°λ” ν”„λ μ„μ„ λ°›κ³  DNS μΏΌλ¦¬λ¥Ό λ‹΄μ€ IP λ°μ΄ν„°κ·Έλ¨μ„ μ¶”μ¶ν• λ’¤, λ°μ΄ν„°κ·Έλ¨μ μμ‹ μ§€ μ£Όμ†λ¥Ό λ³΄κ³  ν¬μ›λ”© ν…μ΄λΈ”μ— λ”°λΌ λ°μ΄ν„°κ·Έλ¨μ„ λ³΄λ‚΄μ•Όν•  KT λ„¤νΈμ›ν¬μ λΌμ°ν„°λ¥Ό κ²°μ •ν•λ‹¤. IP λ°μ΄ν„°κ·Έλ¨μ€ λ§ν¬ λ μ΄μ–΄ ν”„λ μ„μ— λ‹΄κ²¨ μμΌλ©°, ν•™κµμ λΌμ°ν„°μ™€ KT λΌμ°ν„° μ‚¬μ΄μ λ§ν¬λ¥Ό ν†µν•΄ ν”„λ μ„μ΄ μ „μ†΅λλ‹¤.</p>
<p>KT λ„¤νΈμ›ν¬μ λΌμ°ν„°λ” ν”„λ μ„μ„ λ°›μ€ λ’¤ IP λ°μ΄ν„°κ·Έλ¨μ„ μ¶”μ¶ν•΄ μμ‹ μ§€μ IP μ£Όμ†λ¥Ό ν™•μΈν•λ‹¤. μ΄μ–΄μ„ μμ‹ μ DNS μ„λ²„μ—μ„ μ”μ²­λ°›μ€ <code>www.google.com</code>μ— λ€μ‘ν•λ” IP μ£Όμ†λ¥Ό μ°Ύλ”λ‹¤.</p>
<pre class="hljs"><code>School network 68.80.2.0/24

+-------------------+    +--------+     /------\
| Local DNS Server  |&lt;--&gt;| Switch |&lt;--&gt;| Router | 68.85.2.1
| 68.85.2.2         |    +--------+     \------/  00:22:6B:45:1F:1B 
| 00:07:89:1C:43:2F |                       ^
+-------------------+                       |
                                            |
############################################|#####
KT network 68.80.0.0/13                     |
                                            v
                  +---------------+     /-------\
                  | KT DNS Server |&lt;--&gt;| Routers |
                  +---------------+     \-------/
</code></pre>
<p>λ§μ•½ KT μμ‹ μ DNS μ„λ²„μ— μΌμΉν•λ” λ μ½”λ“κ°€ μ—†λ‹¤λ©΄ λ£¨νΈ DNS μ„λ²„μ—κ² μ”μ²­μ„ λ³΄λ‚΄μ•Ό ν•λ‹¤. λ¨Όμ € μ¶λ ¥ μΈν„°νμ΄μ¤λ¥Ό κ²°μ •ν•κ³ , λ£¨νΈ DNS μ„λ²„μ λ„¤νΈμ›ν¬λ΅ DNS μΏΌλ¦¬ ν”„λ μ„μ„ λ³΄λ‚Έλ‹¤. DNS μΏΌλ¦¬ ν”„λ μ„μ„ λ°›μ€ λ£¨νΈ DNS μ„λ²„λ” μΏΌλ¦¬ λ©”μ‹μ§€λ¥Ό μ¶”μ¶ν•΄ <code>www.google.com</code>μ TLD(Top-Level Domain)κ°€ <code>.com</code>μΈ κ²ƒμ„ λ³΄κ³  <code>com</code> TLD μ„λ²„μ IP μ£Όμ†λ¥Ό μ‘λ‹µν•λ‹¤.</p>
<pre class="hljs"><code>School network 68.80.2.0/24

+-------------------+    +--------+     /------\
| Local DNS Server  |&lt;--&gt;| Switch |&lt;--&gt;| Router | 68.85.2.1
| 68.85.2.2         |    +--------+     \------/  00:22:6B:45:1F:1B 
| 00:07:89:1C:43:2F |                       ^
+-------------------+                       |
                                            |
############################################|#####
KT network 68.80.0.0/13                     |
                                            v
                                        /-------\
                                       | Routers |
                                        \-------/
                                            ^ 
                                            | 
############################################|#####
Root DNS Server network                     |
                                            v
                +-----------------+     /-------\
                | Root DNS Server |&lt;--&gt;| Routers |
                +-----------------+     \-------/
</code></pre>
<p>μ‘λ‹µμ„ λ°›μ€ λ΅μ»¬ DNS μ„λ²„λ” <code>com</code> TLD μ„λ²„μ— DNS μΏΌλ¦¬λ¥Ό λ³΄λ‚Έλ‹¤. <code>com</code> TLD μ„λ²„λ” IP μ£Όμ†λ¥Ό λ‹΄μ€ DNS λ¦¬μ†μ¤ λ μ½”λ“λ¥Ό μ°Ύλ”λ‹¤. TLD μ„λ²„λ„ <code>www.google.com</code>μ IP μ£Όμ†λ¥Ό λ¨λ¥Έλ‹¤λ©΄ κµ¬κΈ€μ λ„¤μ„μ„λ²„ IPλ¥Ό μ‘λ‹µν•λ‹¤.</p>
<pre class="hljs"><code>School network 68.80.2.0/24

+-------------------+    +--------+     /------\
| Local DNS Server  |&lt;--&gt;| Switch |&lt;--&gt;| Router | 68.85.2.1
| 68.85.2.2         |    +--------+     \------/  00:22:6B:45:1F:1B 
| 00:07:89:1C:43:2F |                       ^
+-------------------+                       |
                                            |
############################################|#####
KT network 68.80.0.0/13                    ...
############################################|#####
TLD DNS Server network                      |
                                            v
             +--------------------+     /-------\
             | com TLD DNS Server |&lt;--&gt;| Routers |
             +--------------------+     \-------/
</code></pre>
<p>κµ¬κΈ€ λ„¤μ„μ„λ²„λ” νΈμ¤νΈλ„¤μ„μ„ IP μ£Όμ†λ΅ λ§¤ν•‘ν• λ°μ΄ν„°λ¥Ό λ‹΄μ•„ <code>www.google.com</code>μ IP μ£Όμ†λ¥Ό μ‘λ‹µν•λ‹¤. κµ¬κΈ€μ μ„λ²„λ” ν•΄μ™Έμ— μκΈ° λ•λ¬Έμ— KT λ„¤νΈμ›ν¬μ— μ—°κ²°λ ν•΄μ € μΌ€μ΄λΈ”μ„ νƒ€κ³  κµ¬κΈ€ μ„λ²„κ°€ μ„μΉν• κµ­κ°€μ ISP λ§μ„ κ±°μ³μ•Ό ν•λ‹¤. (<a href="https://www.submarinecablemap.com/">TeleGeography Submarine Cable Map</a>μ—μ„ ν•΄μ € μΌ€μ΄λΈ” μ§€λ„λ¥Ό λ³Ό μ μλ‹¤.) λ―Έκµ­μ—λ” AT&amp;T, Comcast λ“±μ ISPκ°€ μμΌλ©°, κµ¬κΈ€μ€ μ§μ ‘ μ΄μν•λ” ISPμΈ Google Fiberμ λ„¤νΈμ›ν¬λ¥Ό μ‚¬μ©ν•λ‹¤.</p>
<pre class="hljs"><code>School network 68.80.2.0/24

+-------------------+    +--------+     /------\
| Local DNS Server  |&lt;--&gt;| Switch |&lt;--&gt;| Router | 68.85.2.1
| 68.85.2.2         |    +--------+     \------/  00:22:6B:45:1F:1B 
| 00:07:89:1C:43:2F |                       ^
+-------------------+                       |
                                            |
############################################|#####
KT network 68.80.0.0/13                    ...
############################################|#####
Google Fiber network 172.80.0.0/13         ...
############################################|#####
Google network 172.217.20.0/19              |
                                            v
               +------------------+     /-------\
               | Auth. DNS Server |&lt;--&gt;| Routers |
               +------------------+     \-------/
</code></pre>
<p>ν΄λΌμ΄μ–ΈνΈλ” DNS λ©”μ‹μ§€μ—μ„ <code>www.google.com</code>μ IP μ£Όμ†λ¥Ό μ¶”μ¶ν•λ‹¤. μ΄μ  ν΄λΌμ΄μ–ΈνΈλ” <code>www.google.com</code> μ„λ²„λ¥Ό λ§λ‚  μ¤€λΉ„κ°€ λμ—λ‹¤.</p>
<h2 id="web-client-server-interaction%3A-tcp-and-http">Web Client-Server Interaction: TCP and HTTP</h2>
<p>ν΄λΌμ΄μ–ΈνΈλ” HTTP GET λ©”μ‹μ§€λ¥Ό λ³΄λ‚΄κΈ° μ„ν•΄ TCP μ†μΌ“μ„ λ§λ“ λ‹¤. λ¨Όμ € three-way handshakeλ¥Ό κ±°μ³ <code>www.google.com</code>κ³Ό TCP μ—°κ²°μ„ κµ¬μ¶•ν•΄μ•Ό ν•λ‹¤. ν΄λΌμ΄μ–ΈνΈκ°€ λ¨Όμ € TCP SYN μ„Έκ·Έλ¨ΌνΈλ¥Ό λ§λ“¤μ–΄ μμ‹ μ§€ ν¬νΈλ¥Ό 80 ν¬νΈ(HTTP)λ΅ μ„¤μ •ν•κ³ , μ¤μ„μΉμ— ν”„λ μ„μ„ μ „μ†΅ν•λ‹¤. μ΄λ• ν”„λ μ„μ€ μμ‹ μ§€ MAC μ£Όμ†(<code>00:22:6B:45:1F:1B</code>)λ¥Ό κ°€μ§€κ³  μλ‹¤.</p>
<p>ν•™κµ, KT, Google Fiber, κµ¬κΈ€ λ„¤νΈμ›ν¬μ λΌμ°ν„°λ” κ°μμ ν¬μ›λ”© ν…μ΄λΈ”μ„ λ³΄κ³  TCP SYNμ„ λ‹΄μ€ λ°μ΄ν„°κ·Έλ¨μ„ <code>www.google.com</code> μ›Ήμ„λ²„λ΅ λ³΄λ‚Έλ‹¤. ISPμ λ„¤νΈμ›ν¬μ™€ κµ¬κΈ€μ λ„¤νΈμ›ν¬ μ‚¬μ΄μ— μλ” λ„λ©”μΈ λ‚΄ λ§ν¬λ¥Ό ν†µν•΄ μ „λ‹¬λλ” ν¨ν‚·λ“¤μ€ BGP(Border Gateway Protocol)μ— λ”°λΌ ν†µμ λλ‹¤.</p>
<p>μ‹¤μ  κµ¬κΈ€ λ„¤νΈμ›ν¬λ” λ°©ν™”λ²½μ΄λ‚ λ΅λ“λ°Έλ°μ„, API κ²μ΄νΈμ›¨μ΄ λ“±μΌλ΅ λ” λ³µμ΅ν•κ² κµ¬μ„±λμ–΄ μκ² μ§€λ§ κµ¬κΈ€μ λ„¤νΈμ›ν¬ μ•„ν‚¤ν…μ³λ” μ—¬κΈ°μ„ λ‹¤λ£¨κ³ μν•λ” ν•µμ‹¬μ΄ μ•„λ‹λ―€λ΅ κ°„μ†ν™”ν–λ‹¤.</p>
<pre class="hljs"><code>School network 68.80.2.0/24

+-------------------+   +------------+    +----+    +--------+     /------\
| Client (Laptop)   |---| Seq Num: 1 |---&gt;| AP |---&gt;| Switch |---&gt;| Router | 68.85.2.1
| 68.85.2.101       |   | SYN        |    +----+    +--------+     \------/  00:22:6B:45:1F:1B 
| 00:16:D3:23:68:8A |   +------------+                                 |
+-------------------+                                                  |
#######################################################################|#####
KT network 68.80.0.0/13                                               ...
#######################################################################|#####
Google Fiber network 172.80.0.0/13                                    ...
#######################################################################|#####
Google network 172.217.20.0/19                                         |
                                                                       v
                                            +----------------+     /-------\
                                            | Web Server     |&lt;---| Routers |
                                            | 172.217.25.228 |     \-------/
                                            +----------------+
</code></pre>
<p><code>www.google.com</code>μ— λ„λ‹¬ν• SYN λ©”μ‹μ§€λ” λ°μ΄ν„°κ·Έλ¨μ—μ„ μ¶”μ¶λκ³ , 80 ν¬νΈλ΅ λ””λ©€ν‹°ν”λ ‰μ¤(Demultiplex)λλ‹¤. κµ¬κΈ€ HTTP μ„λ²„λ” ν΄λΌμ΄μ–ΈνΈμ™€μ TCP μ—°κ²°μ„ μ„ν•΄ μ—°κ²° μ†μΌ“μ„ μƒμ„±ν•λ©°, μ΄μ–΄μ„ TCP SYNACK μ„Έκ·Έλ¨ΌνΈκ°€ μƒμ„±λλ©΄ ν΄λΌμ΄μ–ΈνΈμ— μ „μ†΅ν•λ‹¤.</p>
<pre class="hljs"><code>School network 68.80.2.0/24

+-------------------+    +----+    +--------+     /------\
| Client (Laptop)   |&lt;---| AP |&lt;---| Switch |&lt;---| Router | 68.85.2.1
| 68.85.2.101       |    +----+    +--------+     \------/  00:22:6B:45:1F:1B 
| 00:16:D3:23:68:8A |                                 ^
+-------------------+                                 |
                                                      |
######################################################|#####
KT network 68.80.0.0/13                              ... 
######################################################|#####
Google Fiber network 172.80.0.0/13                   ...
######################################################|#####
Google network 172.217.20.0/19                        |
                                                      |
          +----------------+   +------------+     /-------\
          | Web Server     |---| Seq Num: 5 |---&gt;| Routers |
          | 172.217.25.228 |   | Ack Num: 2 |     \-------/
          +----------------+   | SYNACK     |
                               +------------+
</code></pre>
<p>TCP SYNACK μ„Έκ·Έλ¨ΌνΈλ¥Ό λ‹΄μ€ λ°μ΄ν„°κ·Έλ¨μ΄ ν΄λΌμ΄μ–ΈνΈμ— λ„μ°©ν•λ‹¤. λ°μ΄ν„°κ·Έλ¨μ€ μ΄μμ²΄μ μ—μ„ λ””λ©€ν‹°ν”λ ‰μ¤λμ–΄ μ•μ„ λ§λ“¤μ–΄μ§„ TCP μ†μΌ“μΌλ΅ κ°„λ‹¤. SYNACK μ„Έκ·Έλ¨ΌνΈλ¥Ό λ°›μ€ ν΄λΌμ΄μ–ΈνΈλ” TCP ACK μ‘λ‹µμ„ λ³΄λ‚΄ TCP μ—°κ²°μ„ κµ¬μ¶•ν•λ‹¤.</p>
<pre class="hljs"><code>School network 68.80.2.0/24

+-------------------+   +------------+    +----+    +--------+     /------\
| Client (Laptop)   |---| Seq Num: 2 |---&gt;| AP |---&gt;| Switch |---&gt;| Router | 68.85.2.1
| 68.85.2.101       |   | Ack Num: 6 |    +----+    +--------+     \------/  00:22:6B:45:1F:1B 
| 00:16:D3:23:68:8A |   | ACK        |                                 |
+-------------------+   +------------+                                 |
                                                                       |
#######################################################################|#####
KT network 68.80.0.0/13                                               ...
#######################################################################|#####
Google Fiber network 172.80.0.0/13                                    ...
#######################################################################|#####
Google network 172.217.20.0/19                                         |
                                                                       v
                                            +----------------+     /-------\
                                            | Web Server     |&lt;---| Routers |
                                            | 172.217.25.228 |     \-------/
                                            +----------------+
</code></pre>
<p>κµ¬κΈ€ μ›Ή μ„λ²„λ” HTTPS ν†µμ‹ μ„ ν•λ―€λ΅ TLS handshake κ³Όμ •λ„ κ±°μ³μ•Όν•λ‹¤. λ¨Όμ € ν΄λΌμ΄μ–ΈνΈκ°€ ν΄λΌμ΄μ–ΈνΈ λλ¤(Client random) λ¬Έμμ—΄μ„ μƒμ„±ν•κ³  ClientHello λ©”μ‹μ§€μ— λ‹΄μ•„ μ„λ²„μ—κ² λ³΄λ‚Έλ‹¤. ClientHelloλ¥Ό λ°›μ€ μ„λ²„λ” SSL μΈμ¦μ„μ™€ μ„λ²„ λλ¤(Server random) λ¬Έμμ—΄μ„ ServerHello λ©”μ‹μ§€μ— λ‹΄μ•„ ν΄λΌμ΄μ–ΈνΈμ—κ² μ‘λ‹µν•λ‹¤.</p>
<p>ν΄λΌμ΄μ–ΈνΈλ” μ„λ²„λ΅λ¶€ν„° λ°›μ€ SSL μΈμ¦μ„μ μ ν¨μ„±μ„ κ²€μ¦ν•΄ ν„μ¬ μ—°κ²°λ μ„λ²„κ°€ μ‹¤μ λ΅ <code>www.google.com</code>μ μ†μ μλΌλ” κ²ƒμ„ ν™•μΈν•κ³  μ„λ²„μ—κ² κ³µκ°ν‚¤λ΅ μ•”νΈν™”ν• λλ¤ λ¬Έμμ—΄μ„ λ³΄λ‚Έλ‹¤. μ΄ λ¬Έμμ—΄μ€ ν”„λ¦¬λ§μ¤ν„° μ‹ν¬λ¦Ώ(Premaster secret)μ΄λΌκ³  λ¶€λ¥΄λ©°, κµ¬κΈ€ μ„λ²„μ λΉ„λ°€ν‚¤λ΅λ§ λ³µνΈν™”ν•  μ μλ‹¤.</p>
<p>μ„λ²„λ” ν΄λΌμ΄μ–ΈνΈλ΅λ¶€ν„° ν”„λ¦¬λ§μ¤ν„° μ‹ν¬λ¦Ώμ„ λ°›κ³  μ΄λ¥Ό μμ‹ μ λΉ„λ°€ν‚¤λ΅ λ³µνΈν™”ν•λ‹¤. μ„λ²„μ™€ ν΄λΌμ΄μ–ΈνΈλ” κ°μ μ„λ²„ λ¨λ¤, ν΄λΌμ΄μ–ΈνΈ λλ¤, ν”„λ¦¬λ§μ¤ν„° μ‹ν¬λ¦Ώμ„ μ΄μ©ν•΄ μ„Έμ… ν‚¤(Session key)λ¥Ό μƒμ„±ν•λ‹¤. μ„λ²„μ μ„Έμ… ν‚¤μ™€ ν΄λΌμ΄μ–ΈνΈμ μ„Έμ… ν‚¤λ” λ™μΌν•΄μ•Ό ν•λ‹¤.</p>
<p>λ§μ§€λ§‰μΌλ΅ ν΄λΌμ΄μ–ΈνΈμ™€ μ„λ²„κ°€ μ„Έμ… ν‚¤λ΅ μ•”νΈν™”λ Finished λ©”μ‹μ§€λ¥Ό μ£Όκ³  λ°›μΌλ©° TLS handshakeλ¥Ό λ§μΉλ‹¤. μ΄μ  ν΄λΌμ΄μ–ΈνΈμ™€ μ„λ²„λ” μ„Έμ… ν‚¤λ¥Ό μ΄μ©ν•΄ λ€μΉ­ν‚¤ λ°©μ‹μΌλ΅ TLS ν†µμ‹ μ„ ν•  μ μλ‹¤.</p>
<p>ν΄λΌμ΄μ–ΈνΈμ μ†μΌ“μ€ <code>www.google.com</code>μΌλ΅ λ°μ΄ν„°λ¥Ό λ³΄λ‚Ό μ¤€λΉ„κ°€ λμ—λ‹¤. ν΄λΌμ΄μ–ΈνΈμ λΈλΌμ°μ €λ” HTTP GET λ©”μ‹μ§€λ¥Ό λ§λ“¤κ³  URLμ„ λ‹΄λ”λ‹¤. HTTP GET λ©”μ‹μ§€λ” μ†μΌ“μ— μ“°μ—¬ TCP μ„Έκ·Έλ¨ΌνΈμ νμ΄λ΅λ“κ°€ λλ‹¤. TCP μ„Έκ·Έλ¨ΌνΈλ” λ°μ΄ν„°κ·Έλ¨μ— λ‹΄κΈ°κ³  <code>www.google.com</code>μΌλ΅ μ „μ†΅λλ‹¤. μ‹¤μ λ΅ ν¨ν‚· μΊ΅μ³λ¥Ό ν•΄λ³΄λ©΄ TLSλ΅ μ•”νΈλμ–΄ λ‚΄μ©μ„ ν™•μΈν•  μ μ—†λ‹¤. (<a href="https://parksb.github.io/article/24.html">HTTPSλ” μ–΄λ–»κ² λ‹¤λ¥ΌκΉ?</a> μ°Έκ³ )</p>
<pre class="hljs"><code>School network 68.80.2.0/24

+-------------------+   +----------------------+    +----+    +--------+     /------\
| Client (Laptop)   |---| GET / HTTP/2         |---&gt;| AP |---&gt;| Switch |---&gt;| Router | 68.85.2.1
| 68.85.2.101       |   | Host: www.google.com |    +----+    +--------+     \------/  00:22:6B:45:1F:1B 
| 00:16:D3:23:68:8A |   | ...                  |                                 |
+-------------------+   +----------------------+                                 |
                                                                                 |
#################################################################################|#####
KT network 68.80.0.0/13                                                         ...
#################################################################################|#####
Google Fiber network 172.80.0.0/13                                              ...
#################################################################################|#####
Google network 172.217.20.0/19                                                   |
                                                                                 v
                                                      +----------------+     /-------\
                                                      | Web Server     |&lt;---| Routers |
                                                      | 172.217.25.228 |     \-------/
                                                      +----------------+
</code></pre>
<p><code>www.google.com</code>μ HTTP μ„λ²„λ” TCP μ†μΌ“μ—μ„ HTTP GET λ©”μ‹μ§€λ¥Ό μ½κ³ , HTTP μ‘λ‹µ λ©”μ‹μ§€λ¥Ό λ§λ“ λ‹¤. HTTP μ‘λ‹µ λ©”μ‹μ§€μ bodyμ— μ”μ²­λ°›μ€ μ½ν…μΈ λ¥Ό λ‹΄μ•„ TCP μ†μΌ“μΌλ΅ μ „μ†΅ν•λ‹¤.</p>
<p>HTTP μ‘λ‹µ λ©”μ‹μ§€λ¥Ό λ‹΄μ€ λ°μ΄ν„°κ·Έλ¨μ€ ν•™κµ λ„¤νΈμ›ν¬λ΅ ν–¥ν•κ³ , ν΄λΌμ΄μ–ΈνΈμ— λ„λ‹¬ν•λ‹¤. ν΄λΌμ΄μ–ΈνΈμ λΈλΌμ°μ €λ” μ†μΌ“μ HTTP μ‘λ‹µ λ©”μ‹μ§€λ¥Ό μ½κ³  bodyμ—μ„ htmlμ„ μ¶”μ¶ν•΄ μ›Ήνμ΄μ§€λ¥Ό λ λ”λ§ν•΄μ¤€λ‹¤.</p>
<pre class="hljs"><code>School network 68.80.2.0/24

+-------------------+     +----+     +--------+      /------\
| Client (Laptop)   |&lt;----| AP |&lt;----| Switch |&lt;----| Router | 68.85.2.1
| 68.85.2.101       |     +----+     +--------+      \------/  00:22:6B:45:1F:1B 
| 00:16:D3:23:68:8A |                                    ^
+-------------------+                                    |
                                                         |
#########################################################|#####
KT network 68.80.0.0/13                                 ...
#########################################################|#####
Google Fiber network 172.80.0.0/13                      ...
#########################################################|#####
Google network 172.217.20.0/19                           |
                                                         |
+----------------+   +-------------------------+     /-------\
| Web Server     |---| HTTP/2 200 OK           |---&gt;| Routers |
| 172.217.25.228 |   | Content-Type: text/html |     \-------/
+----------------+   | ...                     |
                     | &lt;html&gt;...&lt;/html&gt;        |
                     +-------------------------+
</code></pre>
<p>λ“λ””μ–΄ ν΄λΌμ΄μ–ΈνΈμ λΈλΌμ°μ € ν™”λ©΄μ— κµ¬κΈ€μ΄ λ³΄μ—¬μ§„λ‹¤.</p>
<h2 id="references">References</h2>
<ul>
<li>J. K. Kurose, K. W. Ross, β€Computer Networking: A Top-Down Approach 7th ed.β€, Pearson, 2016.
</li>
<li><a href="https://www.cloudflare.com/ko-kr/learning/ssl/what-happens-in-a-tls-handshake/">β€What Happens in a TLS Handshake?β€</a>, Cloudflare.</li>
</ul> </section> <section id="article-navigation"> <div class="article-navigation-item article-navigation-next"> <a href="/article/37.html"> <div class="article-navigation-arrow article-navigation-next">οΌ</div> <div class="article-navigation-content article-navigation-next"> <p class="article-navigation-title">μ½κΈ° μ‰¬μ΄ μ›Ήμ„ μ„ν• νƒ€μ΄ν¬κ·Έλν”Ό</p> <p class="article-navigation-subtitle">μ΅°ν μ›μΉ™μΌλ΅ κ°€λ…μ„± λ†’μ΄κΈ°</p> </div> </a> </div> <div class="article-navigation-item article-navigation-prev"> <a href="/article/35.html"> <div class="article-navigation-arrow article-navigation-prev">οΌ</div> <div class="article-navigation-content article-navigation-prev"> <p class="article-navigation-title">π¦€ λ¬μ¤νΈμ λ©‹μ§μ„ λ¨λ¥΄λ” λ‹Ήμ‹ μ€ λ¶μν•΄μ”</p> <p class="article-navigation-subtitle">λ†’μ€ μ„±λ¥κ³Ό μ‹ λΆ°λ¥Ό ν™•λ³΄ν•κΈ° μ„ν• μ–Έμ–΄</p> </div> </a> </div> </section> <section id="article-social-container"> <div id="fb-like" class="fb-like" data-href="https://parksb.github.io/article/36.html" data-layout="button_count" data-action="like" data-size="small" data-show-faces="true" data-share="true"></div> <a href="https://twitter.com/share" class="twitter-share-button" data-show-count="true"></a> </section> <section id="article-comments"> <script async src="https://utteranc.es/client.js" repo="ParkSB/parksb.github.io-comments" issue-term="pathname" theme="github-light" crossorigin="anonymous">
          </script> </section> <section id="article-list-button-container"> <a href="/articles.html"> <div id="article-list-button">π“</div> </a> </section> </article> </main> <div id="fb-root"></div> <script async defer crossorigin="anonymous" src="https://connect.facebook.net/en_US/sdk.js#xfbml=1&version=v3.0"></script> <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script> <script defer src="/init.ddb7c0df.js"></script> <script defer src="/article.8be3798d.js"></script>  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-113147800-1"></script> <script>function a(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],a("js",new Date),a("config","UA-113147800-1");</script>
</body></html>