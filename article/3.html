<!DOCTYPE html><html lang="ko"><head><meta charset="UTF-8"><title> í”„ë¡œì„¸ìŠ¤ê°„ í†µì‹ ì„ í™œìš©í•´ í”„ë¡œê·¸ë˜ë°í•˜ê¸° </title><meta name="viewport" content="width=device-width, initial-scale=1"><meta http-equiv="X-UA-Compatible" content="ie=edge"><meta name="theme-color" content="#F5F5F5"><link rel="canonical" href="https://parksb.github.io/article/3.html"><meta property="og:title" content="í”„ë¡œì„¸ìŠ¤ê°„ í†µì‹ ì„ í™œìš©í•´ í”„ë¡œê·¸ë˜ë°í•˜ê¸°: í•™ì  ê´€ë¦¬ í”„ë¡œê·¸ë¨ ë§Œë“¤ê¸° "><meta property="og:image" content="https://og-image-parksb.vercel.app/**%ED%94%84%EB%A1%9C%EC%84%B8%EC%8A%A4%EA%B0%84%20%ED%86%B5%EC%8B%A0%EC%9D%84%20%ED%99%9C%EC%9A%A9%ED%95%B4%20%ED%94%84%EB%A1%9C%EA%B7%B8%EB%9E%98%EB%B0%8D%ED%95%98%EA%B8%B0**.png?subtitle=%ED%95%99%EC%A0%81%20%EA%B4%80%EB%A6%AC%20%ED%94%84%EB%A1%9C%EA%B7%B8%EB%9E%A8%20%EB%A7%8C%EB%93%A4%EA%B8%B0&description=%E2%80%95%20Simon%20Park%20%E2%80%95%202018.05.01%20%E2%80%95%20parksb.github.io"><meta property="og:description" content="ì»´í“¨í„°ëŠ” ì—¬ëŸ¬ ê°œì˜ í”„ë¡œì„¸ìŠ¤ë¥¼ ë™ì‹œì— ëŒë¦´ ìˆ˜ ìˆë‹¤. (ì‚¬ì‹¤ ì •í™•íˆ 'ë™ì‹œì—â€™ëŠ” ì•„ë‹ˆë‹¤. ìì„¸í•œ ì„¤ëª…ì€ ê³µë£¡ì±…ìœ¼ë¡œ ì •ë¦¬í•˜ëŠ” ìš´ì˜ì²´ì œ Ch.1ë¥¼ ì°¸ê³ .) ê·¸ë ‡ë‹¤ë©´ í•˜ë‚˜ì˜ í”„ë¡œê·¸ë¨ì´ ì—¬ëŸ¬ ê°œì˜ í”„ë¡œì„¸ìŠ¤ë¡œ ë©”ëª¨ë¦¬ì— ë¡œë“œë  ìˆ˜ ìˆì„ê¹Œ? ë‹¹ì—°íˆ ëœë‹¤. ë‘ ê°œì˜ í”„ë¡œì„¸ìŠ¤ë¥¼ ë™ì‹œì— ì‹¤í–‰ì‹œë©° í•˜ë‚˜ì˜ ëª©ì ì„ ë‹¬ì„±í•  ìˆ˜ ìˆë‹¤. ë¦¬ëˆ…ìŠ¤ í™˜ê²½..."><meta name="twitter:title" content="í”„ë¡œì„¸ìŠ¤ê°„ í†µì‹ ì„ í™œìš©í•´ í”„ë¡œê·¸ë˜ë°í•˜ê¸°: í•™ì  ê´€ë¦¬ í”„ë¡œê·¸ë¨ ë§Œë“¤ê¸° "><meta name="twitter:image" content="https://og-image-parksb.vercel.app/**%ED%94%84%EB%A1%9C%EC%84%B8%EC%8A%A4%EA%B0%84%20%ED%86%B5%EC%8B%A0%EC%9D%84%20%ED%99%9C%EC%9A%A9%ED%95%B4%20%ED%94%84%EB%A1%9C%EA%B7%B8%EB%9E%98%EB%B0%8D%ED%95%98%EA%B8%B0**.png?subtitle=%ED%95%99%EC%A0%81%20%EA%B4%80%EB%A6%AC%20%ED%94%84%EB%A1%9C%EA%B7%B8%EB%9E%A8%20%EB%A7%8C%EB%93%A4%EA%B8%B0&description=%E2%80%95%20Simon%20Park%20%E2%80%95%202018.05.01%20%E2%80%95%20parksb.github.io"><meta name="twitter:description" content="ì»´í“¨í„°ëŠ” ì—¬ëŸ¬ ê°œì˜ í”„ë¡œì„¸ìŠ¤ë¥¼ ë™ì‹œì— ëŒë¦´ ìˆ˜ ìˆë‹¤. (ì‚¬ì‹¤ ì •í™•íˆ 'ë™ì‹œì—â€™ëŠ” ì•„ë‹ˆë‹¤. ìì„¸í•œ ì„¤ëª…ì€ ê³µë£¡ì±…ìœ¼ë¡œ ì •ë¦¬í•˜ëŠ” ìš´ì˜ì²´ì œ Ch.1ë¥¼ ì°¸ê³ .) ê·¸ë ‡ë‹¤ë©´ í•˜ë‚˜ì˜ í”„ë¡œê·¸ë¨ì´ ì—¬ëŸ¬ ê°œì˜ í”„ë¡œì„¸ìŠ¤ë¡œ ë©”ëª¨ë¦¬ì— ë¡œë“œë  ìˆ˜ ìˆì„ê¹Œ? ë‹¹ì—°íˆ ëœë‹¤. ë‘ ê°œì˜ í”„ë¡œì„¸ìŠ¤ë¥¼ ë™ì‹œì— ì‹¤í–‰ì‹œë©° í•˜ë‚˜ì˜ ëª©ì ì„ ë‹¬ì„±í•  ìˆ˜ ìˆë‹¤. ë¦¬ëˆ…ìŠ¤ í™˜ê²½..."><meta name="twitter:card" content="summary_large_image"><link rel="preload" href="/init.9f9937d1.css" as="style"><link rel="preload" href="/article.32d70d6a.css" as="style"><link rel="shortcut icon" href="/favicon.6b194a55.ico" type="image/x-icon"><link rel="stylesheet" href="/init.9f9937d1.css"><link rel="stylesheet" href="/article.32d70d6a.css"></head><body> <header id="top-container" role="navigation"> </header> <main id="main-container"> <article id="article-container"> <h1 id="article-title"> í”„ë¡œì„¸ìŠ¤ê°„ í†µì‹ ì„ í™œìš©í•´ í”„ë¡œê·¸ë˜ë°í•˜ê¸° </h1> <h2 id="article-subtitle"> í•™ì  ê´€ë¦¬ í”„ë¡œê·¸ë¨ ë§Œë“¤ê¸° </h2> <time id="article-date"> 2018.05.01 </time> <small id="article-history"> <a href="https://github.com/parksb/parksb.github.io/commits/development/_articles/20180501_management-program-with-ipc.md"> (history) </a> </small> <section id="article-content-container"> <details><summary>Table of Contents</summary>
<p><div class="table-of-contents"><ul><li><a href="#%ED%94%84%EB%A1%9C%EA%B7%B8%EB%9E%A8-%EA%B5%AC%EC%A1%B0">í”„ë¡œê·¸ë¨ êµ¬ì¡°</a></li><li><a href="#child-%ED%94%84%EB%A1%9C%EC%84%B8%EC%8A%A4-%EC%83%9D%EC%84%B1">Child í”„ë¡œì„¸ìŠ¤ ìƒì„±</a></li><li><a href="#%ED%8C%8C%EC%9D%B4%ED%94%84-%ED%86%B5%EC%8B%A0-%EA%B5%AC%ED%98%84">íŒŒì´í”„ í†µì‹  êµ¬í˜„</a></li></ul></div></p>
</details>
<p>ì»´í“¨í„°ëŠ” ì—¬ëŸ¬ ê°œì˜ í”„ë¡œì„¸ìŠ¤ë¥¼ ë™ì‹œì— ëŒë¦´ ìˆ˜ ìˆë‹¤. (ì‚¬ì‹¤ ì •í™•íˆ 'ë™ì‹œì—â€™ëŠ” ì•„ë‹ˆë‹¤. ìì„¸í•œ ì„¤ëª…ì€ <a href="https://parksb.github.io/article/5.html">ê³µë£¡ì±…ìœ¼ë¡œ ì •ë¦¬í•˜ëŠ” ìš´ì˜ì²´ì œ Ch.1</a>ë¥¼ ì°¸ê³ .) ê·¸ë ‡ë‹¤ë©´ í•˜ë‚˜ì˜ í”„ë¡œê·¸ë¨ì´ ì—¬ëŸ¬ ê°œì˜ í”„ë¡œì„¸ìŠ¤ë¡œ ë©”ëª¨ë¦¬ì— ë¡œë“œë  ìˆ˜ ìˆì„ê¹Œ? ë‹¹ì—°íˆ ëœë‹¤. ë‘ ê°œì˜ í”„ë¡œì„¸ìŠ¤ë¥¼ ë™ì‹œì— ì‹¤í–‰ì‹œë©° í•˜ë‚˜ì˜ ëª©ì ì„ ë‹¬ì„±í•  ìˆ˜ ìˆë‹¤. ë¦¬ëˆ…ìŠ¤ í™˜ê²½ì—ì„œ parent í”„ë¡œì„¸ìŠ¤ì™€ child í”„ë¡œì„¸ìŠ¤ê°€ í†µì‹ í•˜ëŠ” í•™ìƒ ì •ë³´ ê´€ë¦¬ í”„ë¡œê·¸ë¨ì„ ë§Œë“¤ì–´ë³´ì•˜ë‹¤.</p>
<h1 id="%ED%94%84%EB%A1%9C%EA%B7%B8%EB%9E%A8-%EA%B5%AC%EC%A1%B0">í”„ë¡œê·¸ë¨ êµ¬ì¡°</h1>
<p><img src="https://user-images.githubusercontent.com/6410412/43831555-7d8fb438-9b3f-11e8-96e0-ccfd782d089d.png" alt="í”„ë¡œê·¸ë¨ êµ¬ì¡° ë„ì‹í™”. í´ë¼ì´ì–¸íŠ¸ì™€ ì„œë²„ê°€ íŒŒì´í”„ë¡œ í†µì‹ . ì„œë²„ëŠ” íŒŒì¼ì— ì ‘ê·¼."></p>
<p>í”„ë¡œê·¸ë¨ì€ parentì™€ childë¡œ ë‚˜ë‰œë‹¤. parentëŠ” í´ë¼ì´ì–¸íŠ¸ë¡œì„œ ì‚¬ìš©ìì—ê²Œ ë©”ë‰´ë¥¼ ì¶œë ¥í•´ì£¼ê³ , ê°’ì„ ì…ë ¥ë°›ëŠ”ë‹¤. childëŠ” ì„œë²„ë¡œì„œ parentì—ê²Œ ë°ì´í„°ë¥¼ ì „ì†¡ë°›ì•„ student.data íŒŒì¼ì— ë°ì´í„°ë¥¼ ì“°ê±°ë‚˜ ì½ëŠ”ë‹¤. ì „ì²´ ì‹¤í–‰ íë¦„ì„ ë„ì‹í™”í•˜ë©´ ë‹¤ìŒ í”Œë¡œìš° ì°¨íŠ¸ì™€ ê°™ë‹¤.</p>
<p><img src="https://user-images.githubusercontent.com/6410412/43831554-7d0c6466-9b3f-11e8-8da3-a5c293503a5a.png" alt="í”Œë¡œìš° ì°¨íŠ¸."></p>
<p>ì„œë²„ì™€ í´ë¼ì´ì–¸íŠ¸ëŠ” íŒŒì´í”„(Pipe)ë¥¼ í†µí•´ ë°ì´í„°ë¥¼ ì£¼ê³  ë°›ëŠ”ë‹¤. íŒŒì´í”„ê°€ ë¬´ì—‡ì¸ê°€? ë§ ê·¸ëŒ€ë¡œ parentì™€ child ì‚¬ì´ì— ê´€ì„ ì„¤ì¹˜í•´ ë°ì´í„°ë¥¼ ì£¼ê³ ë°›ëŠ” í”„ë¡œì„¸ìŠ¤ê°„ í†µì‹  ê¸°ë²•ì„ ë§í•œë‹¤. <a href="https://parksb.github.io/article/7.html">ê³µë£¡ì±…ìœ¼ë¡œ ì •ë¦¬í•˜ëŠ” ìš´ì˜ì²´ì œ Ch.3</a>ì— íŒŒì´í”„ì— ëŒ€í•œ ì„¤ëª…ì´ ìˆë‹¤.</p>
<h1 id="child-%ED%94%84%EB%A1%9C%EC%84%B8%EC%8A%A4-%EC%83%9D%EC%84%B1">Child í”„ë¡œì„¸ìŠ¤ ìƒì„±</h1>
<p>ì²˜ìŒ í”„ë¡œê·¸ë¨ì´ ì‹¤í–‰ëì„ ë•Œ <code>fork()</code> ì‹œìŠ¤í…œì½œì„ í†µí•´ child í”„ë¡œì„¸ìŠ¤ë¥¼ ë§Œë“¤ì–´ì•¼ í•œë‹¤.</p>
<pre class="hljs"><code><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;stdio.h&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;unistd.h&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;sys/wait.h&gt;</span></span>

<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">(<span class="hljs-keyword">int</span> argc, <span class="hljs-keyword">char</span>* argv[])</span> </span>{
  <span class="hljs-keyword">pid_t</span> pid = fork(); <span class="hljs-comment">// childë¥¼ ìƒì„±í•œë‹¤.</span>

  <span class="hljs-keyword">if</span> (pid &lt; <span class="hljs-number">0</span>) { <span class="hljs-comment">// ì—ëŸ¬</span>
    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;[CLIENT] Fork failed.\n&quot;</span>);
    <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;
  } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (pid == <span class="hljs-number">0</span>) { <span class="hljs-comment">// Child (Server)</span>
    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;[SERVER] Child created.\n&quot;</span>);
    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
  } <span class="hljs-keyword">else</span> { <span class="hljs-comment">// Parent (Client)</span>
    wait(<span class="hljs-literal">NULL</span>); <span class="hljs-comment">// childë¥¼ ê¸°ë‹¤ë¦°ë‹¤.</span>
  }
  <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}
</code></pre>
<pre class="hljs"><code>$ ./debug
[SERVER] Child Created.
</code></pre>
<p><code>fork()</code>ë¥¼ ìˆ˜í–‰í•˜ë©´ child í”„ë¡œì„¸ìŠ¤ê°€ ìƒì„±ëœë‹¤. fork ì´í›„ ì½”ë“œëŠ” ëª¨ë‘ parentì™€ childì—ì„œ ë™ì‹œì— ì‹¤í–‰ëœë‹¤. parentëŠ” <code>wait(NULL)</code>ì„ í†µí•´ childì˜ ì‘ì—…ì´ ëë‚  ë•Œê¹Œì§€ ëŒ€ê¸°í•œë‹¤. ì´ë¥¼ ì´ìš©í•´ parentì—ì„œ ì‚¬ìš©ìë¡œë¶€í„° ë°ì´í„°ë¥¼ ì…ë ¥ë°›ê³  childì—ì„œ ì¶œë ¥í•´ë³´ë„ë¡ í•˜ì.</p>
<pre class="hljs"><code><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;stdio.h&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;unistd.h&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;sys/wait.h&gt;</span></span>

<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">(<span class="hljs-keyword">int</span> argc, <span class="hljs-keyword">char</span>* argv[])</span> </span>{
  <span class="hljs-keyword">int</span> cmd = <span class="hljs-number">0</span>;
  <span class="hljs-keyword">pid_t</span> pid  = fork(); <span class="hljs-comment">// childë¥¼ ìƒì„±í•œë‹¤.</span>

  <span class="hljs-keyword">if</span> (pid &lt; <span class="hljs-number">0</span>) { <span class="hljs-comment">// ì—ëŸ¬</span>
    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;[CLIENT] Fork failed.\n&quot;</span>);
    <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;
  } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (pid == <span class="hljs-number">0</span>) { <span class="hljs-comment">// Child (Server)</span>
    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;[SERVER] Received %d.\n&quot;</span>, cmd);
    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
  } <span class="hljs-keyword">else</span> { <span class="hljs-comment">// Parent (Client)</span>
    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;[1] search [2] create\n&quot;</span>);
    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;&gt; &quot;</span>);

    <span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%d&quot;</span>, &amp;cmd);
    wait(<span class="hljs-literal">NULL</span>); <span class="hljs-comment">// childë¥¼ ê¸°ë‹¤ë¦°ë‹¤.</span>
  }
  <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}
</code></pre>
<pre class="hljs"><code>$ ./debug
[1] search [2] create
[SERVER] Received 0.
&gt;
</code></pre>
<p>ì•ˆíƒ€ê¹ì§€ë§Œ ìƒê°ëŒ€ë¡œ ë™ì‘í•˜ì§€ ì•ŠëŠ”ë‹¤. ì‚¬ìš©ìë¡œë¶€í„° <code>cmd</code>ì˜ ê°’ì´ í• ë‹¹ë˜ëŠ” ë¶€ë¶„ì€ parentì´ë©°, ë³€ê²½ëœ <code>cmd</code>ëŠ” parentì—ë§Œ ì¡´ì¬í•œë‹¤. ë”°ë¼ì„œ ë™ì‹œì— ì‹¤í–‰ë˜ê³  ìˆëŠ” childì—ì„œëŠ” <code>cmd</code>ì˜ ê°’ì´ ë³€ê²½ë˜ì§€ ì•Šê³  <code>0</code>ì´ ì¶œë ¥ëœë‹¤. <code>cmd</code> ê°’ì„ childì—ê²Œ ì „ì†¡í•˜ê³ , childê°€ <code>cmd</code>ê°’ì„ ìˆ˜ì‹ í•  ë•Œê¹Œì§€ ëŒ€ê¸°í•˜ëŠ” ë¶€ë¶„ì€ ë”°ë¡œ êµ¬í˜„í•´ì•¼ í•œë‹¤.</p>
<h1 id="%ED%8C%8C%EC%9D%B4%ED%94%84-%ED%86%B5%EC%8B%A0-%EA%B5%AC%ED%98%84">íŒŒì´í”„ í†µì‹  êµ¬í˜„</h1>
<p>childì—ê²Œ <code>cmd</code> ê°’ì„ ì „ì†¡í•˜ë ¤ë©´ íŒŒì´í”„ê°€ í•„ìš”í•˜ë‹¤. ë§Œë“¤ì–´ë³´ì.</p>
<pre class="hljs"><code><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;stdio.h&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;unistd.h&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;sys/wait.h&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;sys/types.h&gt;</span></span>

<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">(<span class="hljs-keyword">int</span> argc, <span class="hljs-keyword">char</span>* argv[])</span> </span>{
  <span class="hljs-keyword">int</span> cmd = <span class="hljs-number">0</span>;
  <span class="hljs-keyword">int</span> p[<span class="hljs-number">2</span>]; <span class="hljs-comment">// p[0]: read, p[1]: write</span>

  pipe(p); <span class="hljs-comment">// íŒŒì´í”„ë¥¼ ìƒì„±í•œë‹¤.</span>
  <span class="hljs-keyword">pid_t</span> pid  = fork(); <span class="hljs-comment">// childë¥¼ ìƒì„±í•œë‹¤.</span>

  <span class="hljs-keyword">if</span> (pid &lt; <span class="hljs-number">0</span>) { <span class="hljs-comment">// ì—ëŸ¬</span>
    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;[CLIENT] Fork failed.\n&quot;</span>);
    <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;
  } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (pid == <span class="hljs-number">0</span>) { <span class="hljs-comment">// Child (Server)</span>
    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;[SERVER] Received %d.\n&quot;</span>, cmd);
    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
  } <span class="hljs-keyword">else</span> { <span class="hljs-comment">// Parent (Client)</span>
    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;[1] search [2] create\n&quot;</span>);
    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;&gt; &quot;</span>);

    <span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%d&quot;</span>, &amp;cmd);
    wait(<span class="hljs-literal">NULL</span>); <span class="hljs-comment">// childë¥¼ ê¸°ë‹¤ë¦°ë‹¤.</span>
  }
  <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}
</code></pre>
<p>íŒŒì´í”„ëŠ” ë‹¨ë°©í–¥ í†µì‹ ë§Œ ë˜ê¸° ë•Œë¬¸ì— ì½ê¸° íŒŒì´í”„ì™€ ì“°ê¸° íŒŒì´í”„ ë‘ ê°œê°€ í•„ìš”í•˜ë‹¤. ì´ì œ ë‘ ê°œì˜ íŒŒì´í”„ë¥¼ ë§Œë“¤ì—ˆìœ¼ë‹ˆ childì—ê²Œ <code>cmd</code>ë¥¼ ì „ì†¡í•´ë³´ì.</p>
<pre class="hljs"><code><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;stdio.h&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;unistd.h&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;sys/wait.h&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;sys/types.h&gt;</span></span>

<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">(<span class="hljs-keyword">int</span> argc, <span class="hljs-keyword">char</span>* argv[])</span> </span>{
  <span class="hljs-keyword">int</span> cmd = <span class="hljs-number">0</span>;
  <span class="hljs-keyword">int</span> p[<span class="hljs-number">2</span>]; <span class="hljs-comment">// p[0]: read, p[1]: write</span>

  pipe(p); <span class="hljs-comment">// íŒŒì´í”„ë¥¼ ìƒì„±í•œë‹¤.</span>
  <span class="hljs-keyword">pid_t</span> pid  = fork(); <span class="hljs-comment">// childë¥¼ ìƒì„±í•œë‹¤.</span>

  <span class="hljs-keyword">if</span> (pid &lt; <span class="hljs-number">0</span>) { <span class="hljs-comment">// ì—ëŸ¬</span>
    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;[CLIENT] Fork failed.\n&quot;</span>);
    <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;
  } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (pid == <span class="hljs-number">0</span>) { <span class="hljs-comment">// Child (Server)</span>
    read(p[<span class="hljs-number">0</span>], &amp;cmd, <span class="hljs-keyword">sizeof</span>(cmd)); <span class="hljs-comment">// íŒŒì´í”„ë¡œ ì „ì†¡ëœ ê°’ì„ ë°›ëŠ”ë‹¤.</span>
    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;[SERVER] Received %d.\n&quot;</span>, cmd);
    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
  } <span class="hljs-keyword">else</span> { <span class="hljs-comment">// Parent (Client)</span>
    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;[1] search [2] create\n&quot;</span>);
    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;&gt; &quot;</span>);
    <span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%d&quot;</span>, &amp;cmd);

    write(p[<span class="hljs-number">1</span>], &amp;cmd, <span class="hljs-keyword">sizeof</span>(cmd)); <span class="hljs-comment">// íŒŒì´í”„ë¥¼ í†µí•´ ê°’ì„ ì „ì†¡í•œë‹¤.</span>
    wait(<span class="hljs-literal">NULL</span>); <span class="hljs-comment">// childë¥¼ ê¸°ë‹¤ë¦°ë‹¤.</span>
  }
  <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}
</code></pre>
<pre class="hljs"><code>$ ./debug
[1] search [2] create
&gt; 1
[SERVER] Received 1.
</code></pre>
<p>childëŠ” ìƒì„ ëœ ì´í›„ íŒŒì´í”„ë¥¼ í†µí•´ ë°ì´í„°ê°€ ì „ë‹¬ë˜ê¸°ë¥¼ ê¸°ë‹¤ë¦°ë‹¤. parentëŠ” ì‚¬ìš©ìì—ê²Œ <code>cmd</code> ê°’ì„ ì…ë ¥ë°›ê³  ì“°ê¸° íŒŒì´í”„ì¸ <code>p[1]</code>ë¥¼ í†µí•´ <code>cmd</code> ê°’ì„ ì „ì†¡í•œë‹¤. ê·¸ë¦¬ê³  ìˆ˜ì‹ ì„ ê¸°ë‹¤ë¦¬ë˜ childëŠ” <code>p[0]</code>ì„ í†µí•´ ì „ë‹¬ëœ <code>cmd</code> ê°’ì„ ì½ì–´ë“¤ì¸ë‹¤.</p>
<p>child í”„ë¡œì„¸ìŠ¤ ìƒì„±ê³¼ íŒŒì´í”„ë¥¼ í†µí•œ ë‘ í”„ë¡œì„¸ìŠ¤ì˜ í†µì‹ . í•µì‹¬ì ì¸ ë¶€ë¶„ì€ ì´ì •ë„ë‹¤. ì‚¬ì‹¤ ì´í›„ ë‚´ìš©ì€ í”„ë¡œì„¸ìŠ¤ë¥¼ ë‹¤ë£¨ëŠ” ê²ƒê³¼ëŠ” ë„ˆë¬´ ê´€ë ¨ì´ ì—†ì–´ì„œ ì œì™¸í–ˆë‹¤.</p> </section> <section id="article-navigation"> <div class="article-navigation-item article-navigation-next"> <a href="/article/4.html"> <div class="article-navigation-arrow article-navigation-next">ï¼œ</div> <div class="article-navigation-content article-navigation-next"> <p class="article-navigation-title">ì°¨ì´ë¥¼ ì¤‘ì‹¬ìœ¼ë¡œ ì‚´í´ë³¸ UIë””ìì¸ê³¼ UXë””ìì¸</p> <p class="article-navigation-subtitle">UIëŠ” ì‹¬ë¯¸ì„±, UXëŠ” ì‚¬ìš©ì„±?</p> </div> </a> </div> <div class="article-navigation-item article-navigation-prev"> <a href="/article/2.html"> <div class="article-navigation-arrow article-navigation-prev">ï¼</div> <div class="article-navigation-content article-navigation-prev"> <p class="article-navigation-title">â™»ï¸ ìë°”ëŠ” ì–´ë–»ê²Œ Garbage Collectionì„ í• ê¹Œ?</p> <p class="article-navigation-subtitle">ì˜¤ë¸Œì íŠ¸ì˜ ì¼ìƒ</p> </div> </a> </div> </section> <section id="article-social-container"> <div id="fb-like" class="fb-like" data-href="https://parksb.github.io/article/3.html" data-layout="button_count" data-action="like" data-size="small" data-show-faces="true" data-share="true"></div> <a href="https://twitter.com/share" class="twitter-share-button" data-show-count="true"></a> </section> <section id="article-comments"> <script async src="https://utteranc.es/client.js" repo="ParkSB/parksb.github.io-comments" issue-term="pathname" theme="github-light" crossorigin="anonymous">
          </script> </section> <section id="article-list-button-container"> <a href="/articles.html"> <div id="article-list-button">ğŸ“š</div> </a> </section> </article> </main> <div id="fb-root"></div> <script async defer crossorigin="anonymous" src="https://connect.facebook.net/en_US/sdk.js#xfbml=1&version=v3.0"></script> <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script> <script defer src="/init.ddb7c0df.js"></script> <script defer src="/article.8be3798d.js"></script>  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-113147800-1"></script> <script>function a(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],a("js",new Date),a("config","UA-113147800-1");</script>
</body></html>